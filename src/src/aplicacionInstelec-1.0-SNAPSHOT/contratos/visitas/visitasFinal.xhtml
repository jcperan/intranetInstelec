<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <f:view>

        <h:head>
            <title>VISITAS</title>
            <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
            <meta name="viewport" content="width=device-width, initial-scale=1"/>
            <meta name="apple-mobile-web-app-capable" content="yes"/>
            <meta name="apple-mobile-web-app-status-bar-style" content="black"/>

            <meta http-equiv="cache-control" content="max-age=0" />
            <meta http-equiv="cache-control" content="no-cache" />
            <meta http-equiv="expires" content="0" />
            <meta http-equiv="expires" content="Tue, 01 Jan 2000 1:00:00 GMT" />
            <meta http-equiv="pragma" content="no-cache" /> 

            <link rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/recursos/contratos.css" type="text/css" />

            <style>
                #cargando {
                    background-color: #cccccc;
                    bottom: 0px;
                    filter: alpha(opacity=50);
                    opacity: 0.5;
                    height: 100%;
                    left: 0px;
                    position: absolute;
                    right: 0px;
                    top: 0px;
                    visibility: hidden;
                    width: 100%;
                    z-index: 1
                }
            </style>



            <script type="text/javascript">

                function DesactivaPantalla(control) {

                    var ctrl2 = document.getElementById("cargando");
                    ctrl2.style.visibility = 'visible';
                    ctrl2.style.height = '100%';
                    return true;
                }

            </script>

        </h:head>

        <h:body>

            <div class="page">

                <h:form id="formulario">

                    <div class="header">
                        <p:commandButton value="Volver" class="boton,izquierda"   
                                         icon="icono-volver" iconPos="left"
                                         action="/contratos/opciones.xhtml" />
                        <p:commandButton value="Grabar" class="derecha" 
                                         icon="icono-grabar" iconPos="right"
                                         action="#{ControladorContratos.GRABAR}" onclick="DesactivaPantalla();"/>
                    </div>

                    <div class="content">

                        <div class="cargando" id="cargando">
                            <center>
                                <br/><br/><br/><br/><br/>
                                <br/><br/><br/><br/><br/>
                                <img src="#{facesContext.externalContext.requestContextPath}/recursos/ajax-loader.gif"/>
                            </center>
                        </div>

                        <table>

                            <tr>

                                <td colspan="2" valign="top">

                                    <table width="100%" height="600px">

                                        <tr>
                                            <td colspan="2">
                                                <h:outputText value = "CLIENTE" styleClass="label" />
                                            </td>
                                        </tr>

                                        <tr>
                                            <td colspan="2">
                                                <h1>
                                                    <p:outputLabel value="#{ControladorContratos.objeto.clientes.nombre}" styleClass="selector" />
                                                </h1>
                                                <h:outputText styleClass="selector" value="#{ControladorContratos.objeto.clientes.direccion}" />
                                                <br/>
                                                <h:outputText styleClass="selector" value="#{ControladorContratos.objeto.clientes.codpostal} #{ControladorContratos.objeto.clientes.poblacion}" />
                                                <br/>
                                                <h:outputText styleClass="selector" value="#{ControladorContratos.objeto.clientes.provincia}" />
                                                <br/>

                                                <a href="tel:#{ControladorContratos.objeto.clientes.telefono2}">
                                                    <h:outputText styleClass="selector" value="#{ControladorContratos.objeto.clientes.telefono1}"/>
                                                </a>
                                                <p:outputLabel value=" - "/>
                                                <a href="tel:#{ControladorContratos.objeto.clientes.telefono2}">
                                                    <h:outputText styleClass="selector" value="#{ControladorContratos.objeto.clientes.telefono2}"/>
                                                </a>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td colspan="2"><p:separator /></td>
                                        </tr>
                                        
                                        <tr>
                                            <td colspan="2">
                                                <h:outputText value = "Tipo de Aviso" styleClass="label" />
                                                <br/>
                                                <p:outputLabel value="#{ControladorContratos.objeto.motivos.motivo}" styleClass="selector" />
                                                <br/>
                                                <p:outputLabel value="#{ControladorContratos.objeto.trabajos.trabajo}" styleClass="selector" />
                                            </td>
                                        </tr>

                                        <tr>
                                            <td colspan="2"><p:separator /></td>
                                        </tr>
                                        
                                        <tr>
                                            <td colspan="2">
                                                <h:outputText value = "DESCRIPCION DEL AVISO" styleClass="label" />
                                                <br/>
                                                <p:outputLabel value="#{ControladorContratos.descripcionAviso}" 
                                                               styleClass="selector" />
                                            </td>
                                        </tr>

                                        <tr>
                                            <td colspan="2"><p:separator /></td>
                                        </tr>
                                        
                                        <tr>
                                            <td colspan="2">
                                                <h:outputText value = "DESCRIPCION DEL TRABAJO REALIZADO" 
                                                              rendered="#{ControlLogin.nivelAdministrador}"
                                                              styleClass="label" />
                                                <br/>
                                                <p:outputLabel value="#{ControladorContratos.descripcion}" 
                                                               rendered="#{ControlLogin.nivelAdministrador}"
                                                               styleClass="selector" />
                                            </td>
                                        </tr>

                                        <tr>
                                            <td colspan="2"><p:separator /></td>
                                        </tr>
                                        
                                        <tr>
                                            <td colspan="2">
                                                <p:outputLabel value="Su firma no implica conformidad con el trabajo realizado, solo reconoce la presencia del tecnico." style="font-weight:bold;"/>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td colspan="2">
                                                <p:inputText class="input" size="40" maxlength="40" value="#{ControladorContratos.firmado1}" />
                                                <br/>
                                                <p:inputText class="input" size="40" maxlength="40" value="#{ControladorContratos.firmado2}" />
                                                <br/><br/>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td colspan="2"><p:separator /></td>
                                        </tr>
                                        
                                        <tr>
                                            <td colspan="2">
                                                <center>
                                                    <p:signature guideline="true" style="width:300px;height:200px" widgetVar="sig" value="#{ControladorContratos.firma}">

                                                    </p:signature>
                                                </center>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td colspan="2">
                                                <p:commandButton value="Borrar Firma" icon="ui-icon-close" type="button" onclick="PF('sig').clear()"/>
                                                <br/><br/><br/>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td colspan="2"><p:separator /></td>
                                        </tr>
                                        
                                        <p:panel rendered="#{ControlLogin.nivelAdministrador}">
                                            <tr>				
                                                <td width="10px">
                                                    <p:inputSwitch value="#{ControladorContratos.enviar1}" 
                                                                   style="width:30px;" onLabel="si" offLabel="no" />
                                                </td>
                                                <td>
                                                    <p:inputText maxlength="40" value="#{ControladorContratos.objeto.clientes.correo1}" />
                                                </td>
                                            </tr>

                                            <tr>				
                                                <td width="10px">
                                                    <p:inputSwitch value="#{ControladorContratos.enviar2}" 
                                                                   style="width:30px;" onLabel="si" offLabel="no" />
                                                </td>
                                                <td>
                                                    <p:inputText maxlength="40" value="#{ControladorContratos.objeto.clientes.correo2}" />
                                                </td>
                                            </tr>

                                            <tr>				
                                                <td width="10px">
                                                    <p:inputSwitch value="#{ControladorContratos.enviar3}" 
                                                                   style="width:30px;" onLabel="si" offLabel="no" />
                                                </td>
                                                <td>
                                                    <p:inputText maxlength="40" value="#{ControladorContratos.objeto.clientes.correo3}" />
                                                </td>
                                            </tr>

                                            <tr>				
                                                <td width="10px">
                                                    <p:inputSwitch value="#{ControladorContratos.enviar4}" 
                                                                   style="width:30px;" onLabel="si" offLabel="no" />
                                                </td>
                                                <td>
                                                    <p:inputText maxlength="40" value="#{ControladorContratos.objeto.clientes.correo4}" />
                                                </td>
                                            </tr>

                                            <tr>				
                                                <td width="10px">
                                                    <p:inputSwitch value="#{ControladorContratos.enviar5}" 
                                                                   style="width:30px;" onLabel="si" offLabel="no" />
                                                </td>
                                                <td>
                                                    <p:inputText maxlength="40" value="#{ControladorContratos.objeto.clientes.correo5}" />
                                                </td>
                                            </tr>
                                        </p:panel>

                                    </table>

                                </td>

                            </tr>

                            <tr>
                                <td>
                                    <p:messages/>
                                    <br/><br/><br/><br/><br/><br/>
                                </td>
                            </tr>

                        </table>

                    </div>

                    <div class="footer">
                        <p:commandButton value="Grabar y Enviar" class="derecha" 
                                         icon="icono-email" iconPos="left" rendered="#{ControlLogin.nivelAdministrador}"
                                         action="#{ControladorContratos.ENVIAR}" onclick="DesactivaPantalla();"/>
                    </div>

                </h:form>

            </div>

        </h:body>

    </f:view>
</html>
